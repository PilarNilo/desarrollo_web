{% extends 'base.html' %}
{% block title %} Agregar Producto {% endblock %}
{% block css %} <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/agregar-producto.css') }}"> {% endblock %}

{% block content %}

<div class="container">
    <h1 style="text-align: center;">Agregar Producto</h1>
<div>
    
    <!-- forma de mostrar los errores en la página, en vez de mostrar directamente en el js con el handle submit-->
<div id="message" hidden>
    <h3>El formulario contiene errores: </h3>
    <ul id="errores">
    </ul>
</div>
{% if messages %}
<div class="error" id="message-visible" >
    <h3>El formulario contiene errores:</h3>

        {% for message in messages %}
            <li>{{ message }}</li>
        {% endfor %}         
</div>
{% endif %}
    
<form class="form" id="form-productos" action="{{ url_for('agregar_productos') }}" method="POST" enctype="multipart/form-data" >

    <!-- mensaje de confirmación para enviar el formulario y empezar a validar -->
    <div id="popupconf" hidden >
        <h2 >¿Confirma el registro de este producto?</h2>
        <button type="submit" class="popupbutton" id="confirmbutton" onclick="location.href='/'">
            Sí, confirmo
        </button>
        <button type="button" class="popupbutton" id="staybutton">
            No, quiero volver al formulario.
        </button>
    </div>
    <div style="text-align: left;" ><label>Tipo de Producto:</label></div>
    <br>

    <div>
        <!-- Acá se puede ver la condicion para que la casilla se ponga con borde rojo indicando error en el formulario al validar -->
        <select name="producto" id="producto" {% if 'Por favor, seleccione un tipo de producto.' in messages %}style="border-color: red;"{% endif %}>
            <option value="">Seleccione Tipo de producto...</option>
            <option value="fruta">Fruta</option>
            <option value="verdura">Verdura</option>
        </select>
    </div>
    <br>

    <div style="text-align: left;" ><label for="producto-especifico">Producto:</label></div>
    <br>
    

    <div>
        <select  name="producto-especifico[]" id="producto-especifico" multiple {% if 'Por favor, seleccione como mínimo 1 producto y máximo 5.' in messages %}style="border-color: red;"{% endif %}></select>
       
    </div> 
    <br>
   

    <div style="text-align: left;" ><label>Descripcion:</label></div>
    <br>

    <div>
        
        <textarea name="descripcion" id="descripciontext" cols="50" rows="4"></textarea>
        
    </div>
    <br>

    <div style="text-align: left;" ><label>Fotos de Productos:</label></div>
    <br>

    <div>
        
            <input type="file" name="filesupload" id="fileupload" multiple accept="image/*" {% if 'Por favor, cargue como mínimo 1 archivo y máximo 3.' in messages %}style="border-color: red;"{% endif %} />
        
    </div>
    <br>

    <div style="text-align: left;" ><label>Región:</label></div>
    <br>

    <div >
        <select name="regiones" id="regiones" {% if 'Por favor, seleccione una región.' in messages %}style="border-color: red;"{% endif %}>
            <option value="">Seleccione Región...</option>
            <option value="Región de Arica y Parinacota">Región de Arica y Parinacota</option>
                    <option value="Región de Tarapaca">Región de Tarapaca</option>
                    <option value="Región de Antofagasta">Región de Antofagasta</option>
                    <option value="Región de Atacama">Región de Atacama</option>
                    <option value="Región de Coquimbo">Región de Coquimbo</option>
                    <option value="Región de Valparaíso">Región de Valparaiso</option>
                    <option value="Región Metropolitana de Santiago">Región Metropolitana de Santiago</option>
                    <option value="Región del Libertador General Bernardo O'Higgins">Región del Libertador General Bernardo O'Higgins</option>
                    <option value="Región del Maule">Región del Maule</option>
                    <option value="Región del Ñuble">Región del Ñuble</option>
                    <option value="Región del Biobío">Región del BioBio</option>
                    <option value="Región de la Araucanía">Región de La Araucania</option>
                    <option value="Región de Los Ríos">Región de de Los Rios</option>
                    <option value="Región de Los Lagos">Región de de Los Lagos</option>
                    <option value="Región Aysen">Región de Aysen</option>
                    <option value="Región de Magallanes">Región de Magallanes</option>
        </select>
    </div>

    <br>

    <div style="text-align: left;" ><label>Comuna:</label></div>
    <br>

    <div >
        <select name="comuna" id="comuna" {% if 'Por favor, seleccione una comuna.' in messages %}style="border-color: red;"{% endif %} >
        </select>
    </div>   
    <br>

    <div style="text-align: left;" ><label>Nombre Productor:</label></div>
    <br>

    <div >
        <input type="text" name="nombre-productor" id="nombre-productor" {% if 'Por favor, ingrese un nombre válido.' in messages %}style="border-color: red;"{% endif %}   />
    </div>
    <br>

    <div style="text-align: left;" ><label>Email Productor:</label></div>
    <br>

    <div >
        <input type="text" name="email" id="email" {% if 'Por favor, ingrese un correo electrónico válido.' in messages %}style="border-color: red;"{% endif %}  />
    </div>
    <br>

    <div style="text-align: left;" ><label>Número celular Productor:</label></div>
    <br>

    <div >
        <input type="text" name="numero-productor" id="numero-productor" {% if 'Por favor, ingrese un número de celular válido.' in messages %}style="border-color: red;"{% endif %} />
    </div>
    <br>
    
    <div class="button-container">
    <div class="popupContainer" id="validacion">
        <button type="button" class="button" id="enviar">
            Agregar Producto(s)
        </button>
        <button type="button" id="back" class="button" onclick="location.href='/'">Volver al menú principal</button>
    </div>  
    
</form>
</div>
</div>
</div>  
</form>
</div>
</div>
{% endblock %}
{% block javascript %}<script  src="{{ url_for('static', filename='js/agregar-producto.js') }}"></script> {% endblock %}